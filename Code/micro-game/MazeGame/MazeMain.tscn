[gd_scene load_steps=23 format=4 uid="uid://bvo8bgw3nbidc"]

[ext_resource type="Script" uid="uid://b4r7ntre8u4u6" path="res://MazeGame/MazeMain.cs" id="1_2dm47"]
[ext_resource type="Script" uid="uid://dy35fe40y8w64" path="res://MazeGame/CharacterBody2d.cs" id="1_cyyfa"]
[ext_resource type="Texture2D" uid="uid://clrymsg02n31" path="res://icon.svg" id="2_ine6e"]
[ext_resource type="Texture2D" uid="uid://7kmro0257l77" path="res://MazeGame/asset/wall.png" id="3_ine6e"]
[ext_resource type="Texture2D" uid="uid://cf4m6hjgw1ff7" path="res://MazeGame/asset/wall2.png" id="4_bvaax"]
[ext_resource type="Texture2D" uid="uid://cd8y45dobjgn2" path="res://MazeGame/asset/apple.png" id="4_edula"]
[ext_resource type="Script" uid="uid://iu6isr50fxt1" path="res://MazeGame/WinLabel.cs" id="7_nfor8"]
[ext_resource type="Script" uid="uid://c1e1xhberrdix" path="res://MazeGame/InventoryUI.cs" id="8_xeokc"]
[ext_resource type="Texture2D" uid="uid://jfupdw0jommn" path="res://MazeGame/asset/candle.png" id="9_br5r8"]
[ext_resource type="Script" uid="uid://dfcqr5t4cg0sf" path="res://MazeGame/ItemCandle.cs" id="9_g6mkp"]
[ext_resource type="Script" uid="uid://ten7hlmcbx5n" path="res://MazeGame/Item1Btn.cs" id="9_prp3h"]

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_ine6e"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_edula"]
resource_name = "wall"
texture = ExtResource("4_bvaax")
texture_region_size = Vector2i(32, 32)
0:0/0 = 0
0:0/0/occlusion_layer_0/polygon_0/polygon = SubResource("OccluderPolygon2D_ine6e")
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)

[sub_resource type="TileSet" id="TileSet_edula"]
tile_size = Vector2i(32, 32)
occlusion_layer_0/light_mask = 1
physics_layer_0/collision_layer = 1
sources/2 = SubResource("TileSetAtlasSource_edula")

[sub_resource type="RectangleShape2D" id="RectangleShape2D_bvaax"]
size = Vector2(24, 24)

[sub_resource type="Gradient" id="Gradient_bvaax"]
colors = PackedColorArray(1, 1, 1, 1, 0, 0, 0, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_edula"]
gradient = SubResource("Gradient_bvaax")
width = 128
height = 128
fill = 1
fill_from = Vector2(0.5, 0.5)
fill_to = Vector2(0.7777778, 0.8504273)

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_2dm47"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_nfor8"]
size = Vector2(64, 64)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_edula"]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_2dm47"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_g6mkp"]
size = Vector2(16, 23)

[node name="MazeMain" type="Node2D"]
script = ExtResource("1_2dm47")

[node name="background" type="ColorRect" parent="."]
offset_left = -1120.0
offset_top = -480.0
offset_right = 1984.0
offset_bottom = 1256.0
color = Color(0, 0, 0, 1)

[node name="Wall" type="TileMapLayer" parent="."]
position = Vector2(160, 128)
tile_map_data = PackedByteArray("AAAAAP7/AgAAAAAAAAAAAAAAAgAAAAAAAAAAAAEAAgAAAAAAAAD//wEAAgAAAAAAAAD+/wEAAgAAAAAAAAAAAP3/AgAAAAAAAAACAP3/AgAAAAAAAAACAP7/AgAAAAAAAAACAAAAAgAAAAAAAAACAAEAAgAAAAAAAAACAAIAAgAAAAAAAAACAAMAAgAAAAAAAAABAAMAAgAAAAAAAAAAAAMAAgAAAAAAAAD//wMAAgAAAAAAAAD+/wMAAgAAAAAAAAD9/wMAAgAAAAAAAAD8/wMAAgAAAAAAAAD9/wQAAgAAAAAAAAD9/wUAAgAAAAAAAAD9/wYAAgAAAAAAAAD+/wUAAgAAAAAAAAD//wUAAgAAAAAAAAAAAAUAAgAAAAAAAAD//wYAAgAAAAAAAAD//wcAAgAAAAAAAAD8/wgAAgAAAAAAAAD9/wgAAgAAAAAAAAD+/wgAAgAAAAAAAAD//wgAAgAAAAAAAAAAAAcAAgAAAAAAAAD7//3/AgAAAAAAAAD7//7/AgAAAAAAAAD7////AgAAAAAAAAD7/wgAAgAAAAAAAAD7/wkAAgAAAAAAAAD7/woAAgAAAAAAAAD7/wsAAgAAAAAAAAD7/wwAAgAAAAAAAAD7/w0AAgAAAAAAAAD7/wAAAgAAAAAAAAD7/wEAAgAAAAAAAAD7/wIAAgAAAAAAAAD7/wMAAgAAAAAAAAD7/wQAAgAAAAAAAAD7/wUAAgAAAAAAAAD7/wYAAgAAAAAAAAD7/wcAAgAAAAAAAAD9////AgAAAAAAAAD+////AgAAAAAAAAD8//z/AgAAAAAAAAD9//z/AgAAAAAAAAD+//z/AgAAAAAAAAD///z/AgAAAAAAAAAAAPz/AgAAAAAAAAABAPz/AgAAAAAAAAACAPz/AgAAAAAAAAADAPz/AgAAAAAAAAAEAPz/AgAAAAAAAAAFAPz/AgAAAAAAAAAGAPz/AgAAAAAAAAAHAPz/AgAAAAAAAAAIAPz/AgAAAAAAAAAJAPz/AgAAAAAAAAAKAPz/AgAAAAAAAAANAPz/AgAAAAAAAAAOAPz/AgAAAAAAAAAPAPz/AgAAAAAAAAAQAPz/AgAAAAAAAAARAPz/AgAAAAAAAAASAPz/AgAAAAAAAAATAPz/AgAAAAAAAAAUAPz/AgAAAAAAAAAVAPz/AgAAAAAAAAAVAP3/AgAAAAAAAAAVAP//AgAAAAAAAAAVAAAAAgAAAAAAAAAVAAEAAgAAAAAAAAAVAAMAAgAAAAAAAAAVAAQAAgAAAAAAAAAVAAUAAgAAAAAAAAAVAAYAAgAAAAAAAAAVAAgAAgAAAAAAAAAVAAkAAgAAAAAAAAAVAAoAAgAAAAAAAAAVAAwAAgAAAAAAAAAVAA0AAgAAAAAAAAAVAA4AAgAAAAAAAAAUABEAAgAAAAAAAAAVABEAAgAAAAAAAAATABEAAgAAAAAAAAASABEAAgAAAAAAAAARABEAAgAAAAAAAAAPABEAAgAAAAAAAAAOABEAAgAAAAAAAAAMABEAAgAAAAAAAAALABEAAgAAAAAAAAAKABEAAgAAAAAAAAAIABEAAgAAAAAAAAAHABEAAgAAAAAAAAAGABEAAgAAAAAAAAAFABEAAgAAAAAAAAAEABEAAgAAAAAAAAADABEAAgAAAAAAAAACABEAAgAAAAAAAAABABEAAgAAAAAAAAAAABEAAgAAAAAAAAD//xEAAgAAAAAAAAD8/xEAAgAAAAAAAAD7/xEAAgAAAAAAAAD9/xEAAgAAAAAAAAD7/w4AAgAAAAAAAAD7/w8AAgAAAAAAAAD7/xAAAgAAAAAAAAAVABAAAgAAAAAAAAAEAP3/AgAAAAAAAAAEAP7/AgAAAAAAAAAEAP//AgAAAAAAAAAEAAAAAgAAAAAAAAAEAAEAAgAAAAAAAAAEAAIAAgAAAAAAAAAGAP7/AgAAAAAAAAAGAP//AgAAAAAAAAAGAAAAAgAAAAAAAAAGAAEAAgAAAAAAAAAGAAIAAgAAAAAAAAAGAAMAAgAAAAAAAAAEAAQAAgAAAAAAAAAEAAUAAgAAAAAAAAAEAAYAAgAAAAAAAAAEAAcAAgAAAAAAAAAEAAgAAgAAAAAAAAAEAAkAAgAAAAAAAAACAAUAAgAAAAAAAAADAAUAAgAAAAAAAAAFAAUAAgAAAAAAAAAGAAUAAgAAAAAAAAAHAAUAAgAAAAAAAAAIAAUAAgAAAAAAAAAIAAQAAgAAAAAAAAAIAAIAAgAAAAAAAAAIAAAAAgAAAAAAAAACAAcAAgAAAAAAAAACAAgAAgAAAAAAAAACAAkAAgAAAAAAAAACAAoAAgAAAAAAAAABAAoAAgAAAAAAAAAAAAoAAgAAAAAAAAD//woAAgAAAAAAAAABAAkAAgAAAAAAAAD9/woAAgAAAAAAAAD+/woAAgAAAAAAAAD9/wsAAgAAAAAAAAD9/wwAAgAAAAAAAAD9/w0AAgAAAAAAAAD9/w4AAgAAAAAAAAD+/w4AAgAAAAAAAAD+/wwAAgAAAAAAAAD//wwAAgAAAAAAAAAAAAwAAgAAAAAAAAAAAA0AAgAAAAAAAAAAAA4AAgAAAAAAAAAAAA8AAgAAAAAAAAAAABAAAgAAAAAAAAD//xAAAgAAAAAAAAD9/xAAAgAAAAAAAAACAAsAAgAAAAAAAAACAA0AAgAAAAAAAAACAA4AAgAAAAAAAAADAA0AAgAAAAAAAAAEAA0AAgAAAAAAAAAEAA4AAgAAAAAAAAAEAA8AAgAAAAAAAAAEABAAAgAAAAAAAAADABAAAgAAAAAAAAACABAAAgAAAAAAAAAEAAsAAgAAAAAAAAAFAAsAAgAAAAAAAAAGAAsAAgAAAAAAAAAHAAsAAgAAAAAAAAAHAAoAAgAAAAAAAAAHAAkAAgAAAAAAAAAHAAgAAgAAAAAAAAAHAAcAAgAAAAAAAAAGAAgAAgAAAAAAAAAFAAYAAgAAAAAAAAAGAAoAAgAAAAAAAAAJAP3/AgAAAAAAAAAJAP7/AgAAAAAAAAAJAP//AgAAAAAAAAAJAAAAAgAAAAAAAAAJAAEAAgAAAAAAAAAJAAIAAgAAAAAAAAAJAAQAAgAAAAAAAAAJAAUAAgAAAAAAAAAJAAYAAgAAAAAAAAAJAAgAAgAAAAAAAAAJAAkAAgAAAAAAAAAJAAoAAgAAAAAAAAAJAAwAAgAAAAAAAAAJAA0AAgAAAAAAAAAJAA8AAgAAAAAAAAAKAP3/AgAAAAAAAAAKAAQAAgAAAAAAAAAKAAUAAgAAAAAAAAAKAAYAAgAAAAAAAAAKAAgAAgAAAAAAAAAKAAkAAgAAAAAAAAAKAAoAAgAAAAAAAAAKAA8AAgAAAAAAAAALAP3/AgAAAAAAAAALAP7/AgAAAAAAAAALAP//AgAAAAAAAAALAAEAAgAAAAAAAAALAAIAAgAAAAAAAAALAAoAAgAAAAAAAAALAAwAAgAAAAAAAAALAA0AAgAAAAAAAAALAA4AAgAAAAAAAAALAA8AAgAAAAAAAAAMAAEAAgAAAAAAAAAMAAIAAgAAAAAAAAAMAAMAAgAAAAAAAAAMAAQAAgAAAAAAAAAMAAUAAgAAAAAAAAAMAAYAAgAAAAAAAAAMAAcAAgAAAAAAAAAMAAgAAgAAAAAAAAAMAAkAAgAAAAAAAAAMAAoAAgAAAAAAAAAMAA8AAgAAAAAAAAANAP3/AgAAAAAAAAANAP//AgAAAAAAAAANAAEAAgAAAAAAAAANAAMAAgAAAAAAAAANAAgAAgAAAAAAAAANAAoAAgAAAAAAAAANAAsAAgAAAAAAAAANAAwAAgAAAAAAAAANAA0AAgAAAAAAAAANAA4AAgAAAAAAAAANAA8AAgAAAAAAAAAOAP3/AgAAAAAAAAAOAP//AgAAAAAAAAAOAAEAAgAAAAAAAAAOAAMAAgAAAAAAAAAOAAUAAgAAAAAAAAAOAAYAAgAAAAAAAAAOAAgAAgAAAAAAAAAOAAoAAgAAAAAAAAAOAAwAAgAAAAAAAAAPAP3/AgAAAAAAAAAPAP//AgAAAAAAAAAPAAAAAgAAAAAAAAAPAAEAAgAAAAAAAAAPAAMAAgAAAAAAAAAPAAUAAgAAAAAAAAAPAAYAAgAAAAAAAAAPAAgAAgAAAAAAAAAPAAoAAgAAAAAAAAAPAA4AAgAAAAAAAAAPAA8AAgAAAAAAAAAPABAAAgAAAAAAAAAQAP3/AgAAAAAAAAAQAAMAAgAAAAAAAAAQAAUAAgAAAAAAAAAQAAgAAgAAAAAAAAAQAAoAAgAAAAAAAAAQAAsAAgAAAAAAAAAQAA0AAgAAAAAAAAAQAA4AAgAAAAAAAAARAP3/AgAAAAAAAAARAP7/AgAAAAAAAAARAAAAAgAAAAAAAAARAAEAAgAAAAAAAAARAAIAAgAAAAAAAAARAAMAAgAAAAAAAAARAAUAAgAAAAAAAAARAAYAAgAAAAAAAAARAAgAAgAAAAAAAAARAAoAAgAAAAAAAAARAAsAAgAAAAAAAAARAA0AAgAAAAAAAAARAA4AAgAAAAAAAAARABAAAgAAAAAAAAASAAMAAgAAAAAAAAASAAUAAgAAAAAAAAASAAgAAgAAAAAAAAASAAoAAgAAAAAAAAATAP7/AgAAAAAAAAATAP//AgAAAAAAAAATAAEAAgAAAAAAAAATAAIAAgAAAAAAAAATAAMAAgAAAAAAAAATAAUAAgAAAAAAAAATAAcAAgAAAAAAAAATAAgAAgAAAAAAAAATAAoAAgAAAAAAAAATAAsAAgAAAAAAAAATAA0AAgAAAAAAAAATAA4AAgAAAAAAAAAUAAUAAgAAAAAAAAAUAAoAAgAAAAAAAAAUAA4AAgAAAAAAAAAGAA0AAgAAAAAAAAAGAA4AAgAAAAAAAAAGAA8AAgAAAAAAAAAGABAAAgAAAAAAAAAHAA0AAgAAAAAAAAAHAA8AAgAAAAAAAAAHABAAAgAAAAAAAAAIAA0AAgAAAAAAAAALAPz/AgAAAAAAAAAMAPz/AgAAAAAAAAAAAP//AgAAAAAAAAD7//z/AgAAAAAAAAAWAPz/AgAAAAAAAAAXAPz/AgAAAAAAAAAYAPz/AgAAAAAAAAAZAPz/AgAAAAAAAAAaAPz/AgAAAAAAAAAaAP3/AgAAAAAAAAAaAP7/AgAAAAAAAAAaAP//AgAAAAAAAAAaAAAAAgAAAAAAAAAaAAEAAgAAAAAAAAAYAAEAAgAAAAAAAAAYAP//AgAAAAAAAAAYAP7/AgAAAAAAAAAWAP3/AgAAAAAAAAAWAP//AgAAAAAAAAAXAP//AgAAAAAAAAAXAAAAAgAAAAAAAAAYAAIAAgAAAAAAAAAZAAQAAgAAAAAAAAAXAAEAAgAAAAAAAAAXAAIAAgAAAAAAAAAXAAMAAgAAAAAAAAAXAAQAAgAAAAAAAAAXAAUAAgAAAAAAAAAXAAoAAgAAAAAAAAAXAAsAAgAAAAAAAAAXAAwAAgAAAAAAAAAYAAYAAgAAAAAAAAAYAAcAAgAAAAAAAAAYAAkAAgAAAAAAAAAYAAsAAgAAAAAAAAAaAAIAAgAAAAAAAAAaAAMAAgAAAAAAAAAaAAQAAgAAAAAAAAAaAAUAAgAAAAAAAAAaAAYAAgAAAAAAAAAaAAcAAgAAAAAAAAAaAAgAAgAAAAAAAAAaAAkAAgAAAAAAAAAaAAoAAgAAAAAAAAAaAAsAAgAAAAAAAAAaAAwAAgAAAAAAAAAWABAAAgAAAAAAAAAWABMAAgAAAAAAAAAXAA0AAgAAAAAAAAAXAA4AAgAAAAAAAAAXAA8AAgAAAAAAAAAXABAAAgAAAAAAAAAXABMAAgAAAAAAAAAYABMAAgAAAAAAAAAZAA0AAgAAAAAAAAAZAA4AAgAAAAAAAAAZABMAAgAAAAAAAAAaAA0AAgAAAAAAAAAaAA4AAgAAAAAAAAAaAA8AAgAAAAAAAAAaABAAAgAAAAAAAAAaABEAAgAAAAAAAAAaABIAAgAAAAAAAAAaABMAAgAAAAAAAAD7/xIAAgAAAAAAAAD7/xMAAgAAAAAAAAD8/xMAAgAAAAAAAAD9/xMAAgAAAAAAAAD+/xMAAgAAAAAAAAD//xMAAgAAAAAAAAAAABIAAgAAAAAAAAAAABMAAgAAAAAAAAABABMAAgAAAAAAAAACABMAAgAAAAAAAAADABMAAgAAAAAAAAAEABMAAgAAAAAAAAAFABMAAgAAAAAAAAAGABMAAgAAAAAAAAAHABMAAgAAAAAAAAAIABMAAgAAAAAAAAAJABMAAgAAAAAAAAAKABMAAgAAAAAAAAALABMAAgAAAAAAAAAMABMAAgAAAAAAAAANABMAAgAAAAAAAAAOABMAAgAAAAAAAAAPABMAAgAAAAAAAAAQABMAAgAAAAAAAAARABMAAgAAAAAAAAASABMAAgAAAAAAAAATABMAAgAAAAAAAAAUABMAAgAAAAAAAAAVABMAAgAAAAAAAAARABIAAgAAAAAAAAAHABIAAgAAAAAAAAAIABAAAgAAAAAAAAANABEAAgAAAAAAAAAWAAgAAgAAAAAAAAAYAAgAAgAAAAAAAAAWAAYAAgAAAAAAAAA=")
tile_set = SubResource("TileSet_edula")

[node name="Player" type="CharacterBody2D" parent="."]
position = Vector2(88, 56)
motion_mode = 1
script = ExtResource("1_cyyfa")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Player"]
position = Vector2(12, 12)
shape = SubResource("RectangleShape2D_bvaax")

[node name="Sprite2D" type="Sprite2D" parent="Player"]
position = Vector2(12, 12)
scale = Vector2(0.1875, 0.1875)
texture = ExtResource("2_ine6e")

[node name="Camera2D" type="Camera2D" parent="Player"]
position = Vector2(12, 12)
zoom = Vector2(6, 6)

[node name="PointLight2D" type="PointLight2D" parent="Player"]
position = Vector2(12, 12)
shadow_enabled = true
texture = SubResource("GradientTexture2D_edula")

[node name="CanvasModulate" type="CanvasModulate" parent="."]
color = Color(0.038397167, 0.038397167, 0.03839716, 1)

[node name="apple" type="StaticBody2D" parent="."]
position = Vector2(960, 704)
physics_material_override = SubResource("PhysicsMaterial_2dm47")

[node name="CollisionShape2D" type="CollisionShape2D" parent="apple"]
shape = SubResource("RectangleShape2D_nfor8")

[node name="Sprite2D" type="Sprite2D" parent="apple"]
texture = ExtResource("4_edula")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Control" type="Control" parent="CanvasLayer"]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="Label" type="Label" parent="CanvasLayer/Control"]
layout_mode = 0
offset_right = 40.0
offset_bottom = 23.0
theme_override_font_sizes/font_size = 32
text = "迷宫游戏"

[node name="Button" type="Button" parent="CanvasLayer/Control"]
layout_mode = 0
offset_left = 848.0
offset_top = 712.0
offset_right = 1020.0
offset_bottom = 765.0
theme_override_font_sizes/font_size = 32
theme_override_styles/normal = SubResource("StyleBoxFlat_edula")
theme_override_styles/hover = SubResource("StyleBoxFlat_2dm47")
text = "重新开始"
icon = ExtResource("3_ine6e")

[node name="winLabel" type="Label" parent="CanvasLayer/Control"]
layout_mode = 0
offset_left = 384.0
offset_top = 312.0
offset_right = 640.0
offset_bottom = 400.0
theme_override_font_sizes/font_size = 64
text = "游戏胜利"
script = ExtResource("7_nfor8")

[node name="InventoryUI" type="GridContainer" parent="CanvasLayer/Control"]
layout_mode = 0
offset_left = 200.0
offset_top = 640.0
offset_right = 784.0
offset_bottom = 765.0
columns = 3
script = ExtResource("8_xeokc")

[node name="Item1Btn" type="Button" parent="CanvasLayer/Control/InventoryUI"]
layout_mode = 2
focus_mode = 0
theme_override_font_sizes/font_size = 64
text = "物品1"
script = ExtResource("9_prp3h")

[node name="Item2Btn" type="Button" parent="CanvasLayer/Control/InventoryUI"]
layout_mode = 2
focus_mode = 0
theme_override_font_sizes/font_size = 64
text = "物品2"

[node name="Item3Btn" type="Button" parent="CanvasLayer/Control/InventoryUI"]
layout_mode = 2
focus_mode = 0
theme_override_font_sizes/font_size = 64
text = "物品3"

[node name="ItemCandle" type="Area2D" parent="."]
position = Vector2(136, 68)
script = ExtResource("9_g6mkp")

[node name="CollisionShape2D" type="CollisionShape2D" parent="ItemCandle"]
position = Vector2(0, 0.5)
shape = SubResource("RectangleShape2D_g6mkp")

[node name="Sprite2D" type="Sprite2D" parent="ItemCandle"]
scale = Vector2(0.25, 0.25)
texture = ExtResource("9_br5r8")

[connection signal="pressed" from="CanvasLayer/Control/Button" to="." method="RestartGame"]
[connection signal="pressed" from="CanvasLayer/Control/InventoryUI/Item1Btn" to="CanvasLayer/Control/InventoryUI" method="OnItemButtonPressed" binds= [1]]
